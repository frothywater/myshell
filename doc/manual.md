# myshell：用户手册

# 基本概念

## 命令行

Shell 是一种命令语言，直译为“外壳”，意即用户可以通过这个外壳与系统内核的服务交互。命令行（CLI, Command Line Interface）是 Shell 命令语言的交互环境，在终端（Terminal）或控制台（Console）上运行。用户可以通过键盘输入命令，回车执行，在屏幕上阅读结果，一切都以文本为基础。

一个命令通常由若干单词或符号组成，由空格分割，第一个单词是程序的名称，后面的称为命令的参数。比如 `ls -l dir` 这个命令的意思是：执行 `ls` 程序，同时传入 `-l`, `dir` 两个参数，结果得到的是以详细格式列出的 `dir` 目录的所有文件。

## 标准输入输出

标准输入输出包含了 `stdin`（标准输入）, `stdout`（标准输出）, `stderr`（标准错误输入） 三个文件，命令在默认情况下从标准输入中读取字符，向标准输出和标准错误输出中写入字符。其中标准输入对应着终端的键盘，标准输出和标准错误输出对应着终端的屏幕。

## 重定向

但命令输入输出不仅仅可以连接到上述的三个标准输入输出文件中，用户可以手动指定输入输出文件，这被称作重定向（redirection）。比如 `ls > output.txt` 就会将命令的结果输出到 `output.txt` 的文件里（如果不存在会创建，如果存在则会清除原有内容），而不是输出到屏幕上。如果使用 `>>` 符号则起到往原有文件追加内容的效果。同样地，输入也可以被重定向，比如 `wc < input.txt` 会显示 `input.txt` 文件的统计信息。

## 管道

不仅如此，除了把文件重定向到命令的输入输出之外，用户还可以将一个命令的输出作为另一个命令的输入，这被称作管道。比如 `ls | grep cat` 会在当前目录中所有文件找到文件名包含 "cat" 的部分。

## 进程管理

一个终端同一时刻不仅仅可以执行一个命令。用户可以指定让命令在后台执行，比如 `sleep 10 &` 会让 `sleep` 命令在后台停留 10 秒，然后输出完成的信息。终端的后台可以有很多命令同时执行，它们都被称作事务。终端会维护一个事务列表，每个事务拥有自己独一无二的编号，从 1 开始。

用户可以在键盘上敲击 `Ctrl + C` 来终止前台命令，也可以敲击 `Ctrl + Z` 来暂停前台命令，终端会自动将它移动至事务列表里。对于那些在事务列表列表里的事务，用户可以通过 `bg %1` (`%1` 代表事务的编号) 将其在后台内恢复，也可以通过 `fg %1` 将其移动至前台恢复。
通过 `jobs` 命令，用户可以查看事务列表。

# 支持的内部命令

`myshell` 支持的内部命令有：

- `cd`: 改变工作目录。
- `pwd`: 输出当前工作目录。
- `dir`: 输出目录包含的文件。
- `echo`: 输出文本。
- `clr`: 清屏。
- `set`: 设定环境变量。
- `unset`: 取消设定环境变量。
- `umask`: 输出或设定掩码。
- `time`: 输出当前时间。
- `test`: 测试文件或数字表达式。
- `shift`: 移动命令参数。
- `bg`: 启动后台事务。
- `fg`: 启动前台事务。
- `jobs`: 输出事务列表。
- `exec`: 替换进程或更改终端的输入输出文件。
- `help`: 输出命令的帮助内容。

用户可以通过 `help <command>` 来查看有关某个命令详细的帮助内容。
